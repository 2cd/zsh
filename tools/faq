#!/usr/bin/env bash
#########
zsh_faq_menu() {
    RETURN_TO_WHERE='zsh_faq_menu'
    #20 50 7
    TMOE_OPTION=$(whiptail --title "FAQ(ã‚ˆãã‚ã‚‹è³ªå•)" \
        --menu "æ‚¨æœ‰å“ªäº›ç–‘é—®ï¼Ÿ\nWhat questions do you have?" 0 50 0 \
        "1" "command-not-foundæ’ä»¶é…ç½®å¤±è´¥" \
        "2" "fzf-tabæ’ä»¶åŠ è½½å¼‚å¸¸" \
        "3" "Fix permissionsä¿®å¤æ–‡ä»¶æƒé™" \
        "4" "Conf does not take effecté…ç½®æ–‡ä»¶æœªç”Ÿæ•ˆ" \
        "5" "quit the readme readeré€€å‡ºæ–‡æ¡£é˜…è¯»å™¨" \
        "0" "ğŸŒš Back to the main menu è¿”å›ä¸»èœå•" \
        3>&1 1>&2 2>&3)
    #############
    case ${TMOE_OPTION} in
    0 | "") tmoe_zsh_main_menu ;;
    1) remove_plugin_command_not_found ;;
    2) reset_fzf_tab ;;
    3)
        ZSH_PATH="${ZINIT_DIR} ${HOME}/.zshrc ${TMOE_ZSH_GIT_DIR} ${HOME}/.zsh_history"
        fix_zsh_folder_permissions
        printf "%s\n" "è‹¥æ— æ³•ä¿®å¤ï¼Œåˆ™è¯·æ‰‹åŠ¨æ‰§è¡Œ${GREEN}compaudit | xargs chmod g-w,o-w${RESET}"
        printf "${GREEN}%s ${PURPLE}%s ${BLUE}%s${RESET}\n" "sudo -E chown -Rv" "${CURRENT_USER_NAME}:${CURRENT_USER_GROUP}" "${ZINIT_DIR} ${HOME}/.p10k.zsh"
        ${CURRENT_USER_NAME}:${CURRENT_USER_GROUP} ${ZINIT_DIR} ${HOME}/.p10k.zsh
        if [ "${LINUX_DISTRO}" != "Android" ] && [ ${HOME} != "/root" ]; then
            printf "%s\n" "æ‚¨äº¦å¯å°†${HOME}ç›®å½•çš„æƒé™ä¿®æ”¹ä¸º${CURRENT_USER_NAME}ç”¨æˆ·å’Œ${CURRENT_USER_GROUP}ç”¨æˆ·ç»„"
            printf "%s\n" "${RED}sudo chown -R ${CURRENT_USER_NAME}:${CURRENT_USER_GROUP} ${HOME}${RESET}"
        fi
        ;;
    4)
        printf "%s\n" "è¯·æ‰‹åŠ¨æ‰§è¡Œ${GREEN}. ~/.zshrc${RESET}æˆ–è€…æ˜¯${GREEN}source ${HOME}/.zshrc${RESET}"
        printf "%s\n" "Please try running ${GREEN}source ~/.zshrc${RESET}"
        #source ${HOME}/.zshrc
        ;;
    5) type_q_to_quit ;;
    esac
    ###############
    press_enter_to_return
    zsh_faq_menu
}
###########
type_q_to_quit() {
    printf "%s\n" "You can type ${GREEN}q${RESET} to ${RED}quit${RESET} reader,è¾“${GREEN}q${RESET}${RED}é€€å‡º${RESET}"
}
###################
reset_fzf_tab() {
    cat <<-EOF
		Do you want to disable fzf-tab extra_opt_02 ?
	EOF
    do_you_want_to_continue
    #git_clone_fzf_tab
    #sudo apt purge command-not-found || apt purge command-not-found
    sed -i 's@ALOXAF_FZF_TAB_EXTRA=.*@ALOXAF_FZF_TAB_EXTRA=01@' ${HOME}/.zshrc
}
#########
remove_plugin_command_not_found() {
    cat <<-EOF
		Do you want to remove command-not-found plugin ?
		${RED}apt purge${RESET} ${BLUE}command-not-found${RESET}
	EOF
    do_you_want_to_continue
    sudo apt purge command-not-found || apt purge command-not-found
}
#########
zsh_faq_menu
